# 服务器接口说明
服务器提供了多种对外接口：1883用户tcp长链接，8080用于websocket长链接（暂未实现），80用户http连接。客户端服务器地址设置80的端口。（sdk会通过http接口获取到长链接端口）

#### 长链接
1883和8080都是长链接，运行火信的私有协议，火信的私有协议来源于对mqtt的二次开发。用于连接鉴权、发送消息、接收通知等。

#### 短链接
80是http连接端口，具有多种用途。

* Admin API
地址为http://{ip}/admin/， 用于应用对火信服务器的调用，比如创建用户，获取用户token，创建聊天室，检查用户在线状态等。

* API
地址为http://{ip}/api/， 用于用户登陆，服务器配置拉取等任务。

* IM
地址为http://{ip}/im/， mars支持长短链接，即IM命令既可以走长链接，也可以走http的短链接。

* Media API
地址为http://{ip}/fs/， 用户上传下载媒体文件。

#### 安全防护
长链接和IM短链接，用户发送协议包，协议包经过AES加密，因此不需要TLS和HTTPS。

Admin API接口有签名保护，而且一般要和应用服务器放到同一网络中，因此可以不用https

API接口需要做https保护。

Media API，上传时由于在mars中进行，无法使用https。这里是有缺陷的，如果您需要对媒体文件进行安全防护，使用SDK发送媒体消息前，需要自己上传媒体文件。

综上，您需要使用nginx对api接口进行https保护。
